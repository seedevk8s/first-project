graph TB
    %% ì‚¬ìš©ì ì¿¼ë¦¬ ì‹œì‘ì 
    Query[("ğŸ” ì‚¬ìš©ì ì¿¼ë¦¬<br/>'2023ë…„ AI ê´€ë ¨ ë…¼ë¬¸ ì°¾ì•„ì¤˜'")]
    
    %% Before ë‹¨ê³„ - ì¿¼ë¦¬ ì „ì²˜ë¦¬
    Before{{"âš™ï¸ ì „ì²˜ë¦¬ ë‹¨ê³„<br/>â€¢ ì¿¼ë¦¬ ì •ê·œí™”<br/>â€¢ ì–¸ì–´ ê°ì§€<br/>â€¢ ì˜ë„ íŒŒì•…"}}
    
    %% LLMì„ í†µí•œ ì¿¼ë¦¬ ë¶„ì„ ë° ë³€í™˜
    LLM[("ğŸ¤– LLM ë¶„ì„ê¸°<br/>â€¢ ìì—°ì–´ â†’ êµ¬ì¡°í™”<br/>â€¢ ê²€ìƒ‰ ì „ëµ ê²°ì •<br/>â€¢ í•„í„° ì¡°ê±´ ì¶”ì¶œ")]
    
    %% ë³€í™˜ëœ ì¿¼ë¦¬ë“¤
    TransQuery["ğŸ“ ë³€í™˜ëœ ê²€ìƒ‰ ì¿¼ë¦¬<br/>'artificial intelligence research'<br/>'machine learning papers'<br/>'deep learning studies'"]
    Filter["ğŸ·ï¸ ë©”íƒ€ë°ì´í„° í•„í„°<br/>â€¢ ë…„ë„: 2023<br/>â€¢ íƒ€ì…: academic paper<br/>â€¢ ì£¼ì œ: AI, ML"]
    
    %% ë²¡í„° ìŠ¤í† ì–´ ë° ê²€ìƒ‰
    VectorStore[("ğŸ“Š ë²¡í„° ì €ì¥ì†Œ<br/>â€¢ ì„ë² ë”© ë°ì´í„°ë² ì´ìŠ¤<br/>â€¢ ì˜ë¯¸ì  ìœ ì‚¬ë„ ê³„ì‚°<br/>â€¢ Top-K ê²€ìƒ‰")]
    
    %% ê²€ìƒ‰ ì—”ì§„ë“¤
    VectorEngine["ğŸ” ë²¡í„° ê²€ìƒ‰ ì—”ì§„<br/>â€¢ ì½”ì‚¬ì¸ ìœ ì‚¬ë„<br/>â€¢ ì„ë² ë”© ë§¤ì¹­<br/>â€¢ ê´€ë ¨ ë¬¸ì„œ ì¶”ì¶œ"]
    
    MetadataEngine["ğŸ·ï¸ ë©”íƒ€ë°ì´í„° ì—”ì§„<br/>â€¢ êµ¬ì¡°í™”ëœ í•„í„°ë§<br/>â€¢ ì¡°ê±´ë¶€ ê²€ìƒ‰<br/>â€¢ ì •í™•í•œ ë§¤ì¹­"]
    
    %% ê²°ê³¼ í†µí•©
    Synthesizer["âš¡ ê²°ê³¼ í†µí•©ê¸°<br/>â€¢ ë‹¤ì¤‘ ì†ŒìŠ¤ ê²°í•©<br/>â€¢ ì¤‘ë³µ ì œê±°<br/>â€¢ ì ìˆ˜ ì •ê·œí™”"]
    
    %% í›„ì²˜ë¦¬ ë° ì¬ìˆœìœ„
    PostProcess{{"ğŸ”„ í›„ì²˜ë¦¬ ë‹¨ê³„<br/>â€¢ ê´€ë ¨ì„± ê²€ì¦<br/>â€¢ í’ˆì§ˆ í‰ê°€<br/>â€¢ ì»¨í…ìŠ¤íŠ¸ í™•ì¸"}}
    
    Reranking["ğŸ“Š ì¬ìˆœìœ„í™”<br/>â€¢ Cross-encoder ì‚¬ìš©<br/>â€¢ ê´€ë ¨ì„± ì¬í‰ê°€<br/>â€¢ ìµœì¢… ìˆœìœ„ ê²°ì •"]
    
    %% ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
    ContextBuilder["ğŸ“‹ ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±ê¸°<br/>â€¢ ì„ íƒëœ ë¬¸ì„œ ì •ë¦¬<br/>â€¢ í† í° ìˆ˜ ìµœì í™”<br/>â€¢ ìˆœì„œ ë°°ì¹˜"]
    
    %% ìµœì¢… í”„ë¡¬í”„íŠ¸ ìƒì„±
    Prompt[("ğŸ’¬ ìµœì¢… í”„ë¡¬í”„íŠ¸<br/>ì‹œìŠ¤í…œ: ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì—¬...<br/>ì»¨í…ìŠ¤íŠ¸: [ê´€ë ¨ ë¬¸ì„œë“¤]<br/>ì‚¬ìš©ì: 2023ë…„ AI ê´€ë ¨ ë…¼ë¬¸ ì°¾ì•„ì¤˜")]
    
    %% ì—°ê²° ê´€ê³„ ë° ì„¤ëª…
    Query -->|"ì›ì‹œ ìì—°ì–´ ì…ë ¥"| Before
    Before -->|"ì •ì œëœ ì¿¼ë¦¬"| LLM
    
    %% LLMì—ì„œ ì—¬ëŸ¬ ì¶œë ¥ìœ¼ë¡œ ë¶„ê¸°
    LLM -->|"ì˜ë¯¸ì  ê²€ìƒ‰ìš©"| TransQuery
    LLM -->|"êµ¬ì¡°ì  í•„í„°ë§ìš©"| Filter
    
    %% ë³‘ë ¬ ê²€ìƒ‰ ìˆ˜í–‰
    TransQuery -->|"ì„ë² ë”© ê²€ìƒ‰"| VectorEngine
    Filter -->|"ì¡°ê±´ë¶€ ê²€ìƒ‰"| MetadataEngine
    
    %% ë²¡í„° ì €ì¥ì†Œ ì—°ê²°
    VectorEngine <-->|"ì„ë² ë”© ì¿¼ë¦¬"| VectorStore
    
    %% ê²€ìƒ‰ ê²°ê³¼ í†µí•©
    VectorEngine -->|"ì˜ë¯¸ì  ìœ ì‚¬ ë¬¸ì„œ"| Synthesizer
    MetadataEngine -->|"ì¡°ê±´ ë§Œì¡± ë¬¸ì„œ"| Synthesizer
    
    %% í›„ì²˜ë¦¬ ê³¼ì •
    Synthesizer -->|"í†µí•©ëœ ê²°ê³¼ì…‹"| PostProcess
    PostProcess -->|"ê²€ì¦ëœ ê²°ê³¼"| Reranking
    
    %% ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±
    Reranking -->|"ìµœì¢… ì„ ë³„ ë¬¸ì„œ"| ContextBuilder
    
    %% ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ
    ContextBuilder -->|"êµ¬ì¡°í™”ëœ ì»¨í…ìŠ¤íŠ¸"| Prompt
    
    %% í”¼ë“œë°± ë£¨í”„ (LLMìœ¼ë¡œ ë‹¤ì‹œ)
    Prompt -.->|"ì„±ëŠ¥ í”¼ë“œë°±"| LLM
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef queryStyle fill:#ff6b6b,stroke:#d63031,stroke-width:3px,color:#fff
    classDef llmStyle fill:#4ecdc4,stroke:#00b894,stroke-width:3px,color:#fff
    classDef processStyle fill:#667eea,stroke:#5f3dc4,stroke-width:2px,color:#fff
    classDef engineStyle fill:#f093fb,stroke:#e84393,stroke-width:2px,color:#fff
    classDef outputStyle fill:#ffeaa7,stroke:#fdcb6e,stroke-width:2px,color:#2d3436
    classDef storageStyle fill:#a8e6cf,stroke:#56c596,stroke-width:2px,color:#2d3436
    classDef contextStyle fill:#dda0dd,stroke:#ba68c8,stroke-width:2px,color:#fff
    
    class Query,Prompt queryStyle
    class LLM llmStyle
    class Before,PostProcess processStyle
    class VectorEngine,MetadataEngine,Synthesizer engineStyle
    class TransQuery,Filter,Reranking outputStyle
    class VectorStore storageStyle
    class ContextBuilder contextStyle