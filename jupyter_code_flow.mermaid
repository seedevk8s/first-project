flowchart TD
    S1[셀1: 패키지 설치] --> S2[셀2: 환경변수 로드]
    S2 --> S3[셀3: Qdrant 클라이언트 설정]
    S3 --> S4[셀4: 영화 데이터 TextNode 생성]
    S4 --> S5[셀5: LLM 및 임베딩 모델 설정]
    S5 --> S6[셀6: 벡터 인덱스 생성]
    
    S6 --> S7[셀7: 기본 Retriever 테스트]
    S7 --> S8[셀8: 기본 QueryEngine 테스트]
    
    S8 --> S9[셀9: VectorStoreInfo 정의]
    S9 --> S10[셀10: AutoRetriever 생성]
    S10 --> S11[셀11: Qdrant 메타데이터 인덱스 생성]
    
    S11 --> S12[셀12: 자동 필터링 테스트 1]
    S12 --> S13[셀13: 자동 필터링 테스트 2]
    S13 --> S14[셀14: 다중 메타데이터 조건 테스트]
    S14 --> S15[셀15: 존재하지 않는 조건 테스트]
    S15 --> S16[셀16: 필터 해석 한계 확인]
    
    S16 --> S17[셀17: 프롬프트 내용 확인]
    S17 --> S18[셀18: 프롬프트 변수 확인]
    S18 --> S19[셀19: 커스텀 프롬프트 작성]
    S19 --> S20[셀20: PromptTemplate 생성]
    S20 --> S21[셀21: 프롬프트 지시사항 적용]
    S21 --> S22[셀22: AutoRetriever 업데이트]
    S22 --> S23[셀23: 수정된 프롬프트 테스트]
    
    S23 --> S24[셀24: QueryEngine 구성]
    S24 --> S25[셀25: 복합 질문 응답]
    S25 --> S26[셀26: 조건부 목록 질문]
    S26 --> S27[셀27: 데이터 없음 처리]
    S27 --> S28[셀28: 추론형 질문]
    
    style S1 fill:#e3f2fd
    style S6 fill:#f3e5f5
    style S11 fill:#e8f5e8
    style S22 fill:#fff3e0
    style S24 fill:#ffecb3
    style S28 fill:#c8e6c9