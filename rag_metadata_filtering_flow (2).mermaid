flowchart TD
    A[패키지 설치] --> B[환경변수 로드]
    B --> C[Qdrant 클라이언트 설정]
    C --> D[영화 데이터 준비]
    D --> E[LLM 모델 설정]
    E --> F[벡터 인덱스 생성]
    
    F --> G[기본 검색 테스트]
    G --> H{검색 결과 정확?}
    H -->|아니오| I[기본 QueryEngine 테스트]
    
    I --> J[VectorStoreInfo 정의]
    J --> K[AutoRetriever 생성]
    K --> L[메타데이터 인덱스 생성]
    
    L --> M[자동 필터링 테스트]
    M --> N[복수 조건 검색]
    N --> O[다중 메타데이터 조건]
    
    O --> P{장르 필터링 문제?}
    P -->|예| Q[프롬프트 내용 확인]
    Q --> R[사용자정의 프롬프트 작성]
    R --> S[PromptTemplate 생성]
    S --> T[AutoRetriever 업데이트]
    
    T --> U[QueryEngine 구성]
    U --> V[복합 질문 테스트]
    V --> W[조건부 목록 질문]
    W --> X[데이터 없음 처리]
    X --> Y[추론형 질문]
    
    Y --> Z[완료]