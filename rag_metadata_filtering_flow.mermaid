flowchart TD
    A[1. 패키지 설치<br/>LlamaIndex & Qdrant] --> B[2. 환경변수 로드<br/>OpenAI & Qdrant API 키]
    B --> C[3. Qdrant 클라이언트 설정<br/>벡터 DB 연결]
    C --> D[4. 영화 데이터 준비<br/>TextNode 생성]
    D --> E[5. LLM & 임베딩 모델 설정<br/>OpenAI GPT-4o-mini]
    E --> F[6. Qdrant 벡터스토어 인덱스 생성<br/>영화 데이터 색인]
    
    F --> G[7. 기본 검색 테스트<br/>단순 유사도 검색]
    G --> H{검색 결과 만족?}
    H -->|아니오| I[8. 기본 QueryEngine 테스트<br/>LLM 응답 생성]
    
    I --> J[9. VectorStoreInfo 정의<br/>메타데이터 스키마 설정]
    J --> K[10. AutoRetriever 생성<br/>자동 필터링 기능]
    K --> L[11. Qdrant 메타데이터 인덱스<br/>필드별 인덱스 생성]
    
    L --> M[12. 자동 필터링 테스트<br/>봉준호 감독 2018년 이전]
    M --> N[13. 복수 조건 검색<br/>봉준호 감독 2020년 이전]
    N --> O[14. 다중 메타데이터 조건<br/>박찬욱 감독 멜로 장르]
    
    O --> P{장르 필터링 문제?}
    P -->|예| Q[15. 프롬프트 내용 확인<br/>AutoRetriever 내부]
    Q --> R[16. 사용자정의 프롬프트 작성<br/>장르 키워드 처리 개선]
    R --> S[17. PromptTemplate 생성<br/>커스텀 지시사항 포함]
    S --> T[18. AutoRetriever 업데이트<br/>개선된 프롬프트 적용]
    
    T --> U[19. QueryEngine 구성<br/>AutoRetriever + ResponseSynthesizer]
    U --> V[20. 복합 질문 테스트<br/>평균 평점 계산]
    V --> W[21. 조건부 목록 질문<br/>연상호 감독 공포 영화]
    W --> X[22. 데이터 없음 처리<br/>이병헌 감독 코미디]
    X --> Y[23. 추론형 질문<br/>영화 제작 주기 분석]
    
    Y --> Z[완료: 고급 RAG 시스템<br/>메타데이터 필터링 구현]
    
    style A fill:#e1f5fe
    style F fill:#f3e5f5
    style K fill:#f3e5f5
    style U fill:#e8f5e8
    style Z fill:#fff3e0