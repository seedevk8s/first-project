flowchart TD
    A[1. 패키지 설치] --> B[2. 환경변수 로드]
    B --> C[3. Qdrant 클라이언트 설정]
    C --> D[4. 영화 데이터 준비]
    D --> E[5. LLM 모델 설정]
    E --> F[6. 벡터 인덱스 생성]
    
    F --> G[7. 기본 검색 테스트]
    G --> H{검색 결과 만족?}
    H -->|아니오| I[8. 기본 QueryEngine 테스트]
    
    I --> J[9. VectorStoreInfo 정의]
    J --> K[10. AutoRetriever 생성]
    K --> L[11. 메타데이터 인덱스 생성]
    
    L --> M[12. 자동 필터링 테스트]
    M --> N[13. 복수 조건 검색]
    N --> O[14. 다중 메타데이터 조건]
    
    O --> P{장르 필터링 문제?}
    P -->|예| Q[15. 프롬프트 내용 확인]
    Q --> R[16. 사용자정의 프롬프트 작성]
    R --> S[17. PromptTemplate 생성]
    S --> T[18. AutoRetriever 업데이트]
    
    T --> U[19. QueryEngine 구성]
    U --> V[20. 복합 질문 테스트]
    V --> W[21. 조건부 목록 질문]
    W --> X[22. 데이터 없음 처리]
    X --> Y[23. 추론형 질문]
    
    Y --> Z[완료: 고급 RAG 시스템]
    
    style A fill:#e1f5fe
    style F fill:#f3e5f5
    style K fill:#f3e5f5
    style U fill:#e8f5e8
    style Z fill:#fff3e0