flowchart TD
    %% 데이터 소스
    A[원본 데이터<br/>📄 PDF, DOC<br/>🌐 웹페이지<br/>📊 데이터베이스] --> B[문서 청킹<br/>Chunking]
    
    %% 청킹 상세
    B --> B1[청킹 방법<br/>• 고정 크기<br/>• 문장 단위<br/>• 의미적 청킹<br/>• 슬라이딩 윈도우]
    
    %% 임베딩
    B1 --> C[임베딩 생성<br/>🔤 텍스트 → 벡터]
    
    %% 벡터 DB 저장
    C --> D[(Qdrant<br/>벡터 데이터베이스<br/>• 벡터 + 메타데이터<br/>• 유사도 검색<br/>• 하이브리드 검색)]
    
    %% 사용자 쿼리
    E[사용자 질문] --> F[질문 임베딩<br/>🔤 질문 → 벡터]
    
    %% 검색
    F --> G[벡터 유사도 검색<br/>상위 K개 청크 검색]
    D --> G
    
    %% LlamaIndex 처리
    G --> H[LlamaIndex<br/>• 검색된 청크 조합<br/>• 컨텍스트 구성<br/>• 프롬프트 생성]
    
    %% LLM 생성
    H --> I[LLM<br/>GPT, Claude 등<br/>답변 생성]
    
    %% 최종 결과
    I --> J[최종 답변<br/>📝 컨텍스트 기반 응답]
    
    %% 평가 지표
    G --> K[검색 성능 평가]
    K --> K1[Recall@5<br/>관련 문서 재현율<br/>= 검색된 관련문서 / 전체 관련문서]
    K --> K2[Precision@5<br/>검색 정밀도<br/>= 검색된 관련문서 / 검색된 총 문서]
    K --> K3[MRR@5<br/>평균 역순위<br/>= 1 / 첫번째 관련문서 순위]
    
    %% 스타일링
    classDef dataSource fill:#e1f5fe
    classDef processing fill:#f3e5f5
    classDef storage fill:#e8f5e8
    classDef llm fill:#fff3e0
    classDef evaluation fill:#fce4ec
    
    class A dataSource
    class B,B1,C,F,H processing
    class D storage
    class I,J llm
    class K,K1,K2,K3 evaluation