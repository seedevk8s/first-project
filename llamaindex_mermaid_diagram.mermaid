graph TB
    %% ì‚¬ìš©ì ì¿¼ë¦¬ ì‹œì‘ì 
    Query[("ğŸ” Query<br/>ì‚¬ìš©ì ì§ˆë¬¸")] 
    
    %% Before ë‹¨ê³„ - ì¿¼ë¦¬ ì „ì²˜ë¦¬
    Before{{"âš™ï¸ Before<br/>ì „ì²˜ë¦¬"}}
    
    %% LLMì„ í†µí•œ ì¿¼ë¦¬ ë¶„ì„ ë° ë³€í™˜
    LLM[("ğŸ¤– LLM<br/>ì–¸ì–´ëª¨ë¸")]
    
    %% ë³€í™˜ëœ ì¿¼ë¦¬ë“¤
    TransQuery["ğŸ“ Transformed Query<br/>ë³€í™˜ëœ ì¿¼ë¦¬"]
    Filter["ğŸ·ï¸ Filter<br/>í•„í„° ì¡°ê±´"]
    
    %% ê²€ìƒ‰ ì—”ì§„ë“¤
    VectorEngine["ğŸ” Vector Engine<br/>ë²¡í„° ê²€ìƒ‰"]
    Synthesizer["âš¡ Synthesizer<br/>í†µí•© ì—”ì§„"]
    
    %% í›„ì²˜ë¦¬ ë° ì¬ìˆœìœ„
    PostProcess{{"ğŸ”„ Post Process<br/>í›„ì²˜ë¦¬"}}
    Reranking["ğŸ“Š Re-ranking<br/>ì¬ìˆœìœ„í™”"]
    
    %% ìµœì¢… í”„ë¡¬í”„íŠ¸ ìƒì„±
    Prompt[("ğŸ’¬ Prompt<br/>ìµœì¢… í”„ë¡¬í”„íŠ¸")]
    
    %% ì—°ê²° ê´€ê³„
    Query --> Before
    Before --> LLM
    
    %% LLMì—ì„œ ì—¬ëŸ¬ ì¶œë ¥ìœ¼ë¡œ ë¶„ê¸°
    LLM --> TransQuery
    LLM --> Filter
    
    %% ë³‘ë ¬ ê²€ìƒ‰ ìˆ˜í–‰
    TransQuery --> VectorEngine
    Filter --> VectorEngine
    
    %% ê²€ìƒ‰ ê²°ê³¼ í†µí•©
    VectorEngine --> Synthesizer
    
    %% í›„ì²˜ë¦¬ ê³¼ì •
    Synthesizer --> PostProcess
    PostProcess --> Reranking
    
    %% ìµœì¢… í”„ë¡¬í”„íŠ¸ë¡œ
    Reranking --> Prompt
    
    %% í”¼ë“œë°± ë£¨í”„ (LLMìœ¼ë¡œ ë‹¤ì‹œ)
    Prompt -.-> LLM
    
    %% ìŠ¤íƒ€ì¼ë§
    classDef queryStyle fill:#ff6b6b,stroke:#d63031,stroke-width:3px,color:#fff
    classDef llmStyle fill:#4ecdc4,stroke:#00b894,stroke-width:3px,color:#fff
    classDef processStyle fill:#667eea,stroke:#5f3dc4,stroke-width:2px,color:#fff
    classDef engineStyle fill:#f093fb,stroke:#e84393,stroke-width:2px,color:#fff
    classDef outputStyle fill:#ffeaa7,stroke:#fdcb6e,stroke-width:2px,color:#2d3436
    
    class Query queryStyle
    class LLM llmStyle
    class Before,PostProcess processStyle
    class VectorEngine,Synthesizer engineStyle
    class TransQuery,Filter,Reranking,Prompt outputStyle